<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hilbert Curve Sonification</title>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <canvas id="canvas" width="600" height="600"></canvas>
    <audio id="audio" autoplay></audio>
    
    <script src="hilbert.js"></script>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const audio = document.getElementById('audio');
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        // Set up webcam input

        // Function to draw the Hilbert Curve
        function drawHilbertCurve(order) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const size = canvas.width;
            const points = hilbert(order);
            const step = size / (1 << order);
            ctx.beginPath();
            ctx.moveTo(points[0].x * step, points[0].y * step);
            for (let i = 1; i < points.length; i++) {
                ctx.lineTo(points[i].x * step, points[i].y * step);
            }
            ctx.stroke();
        }

        // Function to sonify the Hilbert Curve
        function sonifyHilbertCurve(order) {
            const points = hilbert(order);
            const audioBuffer = audioCtx.createBuffer(1, points.length, audioCtx.sampleRate);
            const bufferData = audioBuffer.getChannelData(0);
            for (let i = 0; i < points.length; i++) {
                bufferData[i] = points[i].x / canvas.width; // You can modify this to sonify y-coordinate or both coordinates
            }
            const source = audioCtx.createBufferSource();
            source.buffer = audioBuffer;
            source.connect(audioCtx.destination);
            source.start();
        }

        // Example: Draw and sonify Hilbert Curve of order 4
        const order = 4;
        drawHilbertCurve(order);
        sonifyHilbertCurve(order);
    </script>
</body>
</html>
